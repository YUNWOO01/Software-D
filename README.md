
制御/初期化,main (main.c),なし,プログラムのエントリポイント。ユーザー入力を受け付け、信号を数値に変換し、tk_selectを呼び出す。,なし,
制御/初期化,tk_select (tk_select.c),なし,メイン制御関数。st_anaから始まり、分析関数を連鎖させ、最終的にタスク関数を呼び出す。,タスクまたは分析関数へ,
---,---,---,---,---,---
状態分析,st_ana (st_ana.c),なし,端末の現状態と入力信号から、次のアクション（タスクまたは分析関数）を決定する。,idle + offhook → OR_ANA_FUNC (40),
分析関数,or_ana (tk_select.c),OR_ANA_FUNC (40),発信許可（or_ac）をチェックする。,(ダミー) 常に許可し、TASK01 (501) へ,ダミー実装
分析関数,num_ana (tk_select.c),NUM_ANA_FUNC (41),ダイヤルされた電話番号を検索し、着端末番号を返す。,(ダミー) 成功: TER_ANA_FUNC (42) へ,ダミー実装
分析関数,ter_ana (tk_select.c),TER_ANA_FUNC (42),着端末の状態（空き/話中など）をチェックする。,(ダミー) idleならTASK12 (512) へ,ダミー実装
---,---,---,---,---,---
タスク関数,task01 (tk_select.c),TASK01 (501),受話器上げ直後の処理。発信音 (DIALTONE) を接続する。,dialtone (1) へ,ダミー実装
タスク関数,task04 (task04.c),TASK04 (504),話中処理。話中音 (BUSYTONE) を接続する。,busy (4) へ,
タスク関数,task10 (tk_select.c),TASK10 (510),回線をクリアし、アイドル状態に戻す (ダイヤルトーン中のオンフックなど)。,idle (0) へ,ダミー実装
タスク関数,task12 (task12.c),TASK12 (512),呼び出し処理。発信側に呼び返し音、着信側に呼び出し音を接続する。,両端末をringing (2) へ,
タスク関数,task14 (tk_select.c),TASK14 (514),番号エラーや呼び出し中の発信側オンフックなどで使用。,busy (4) へ,ダミー実装
タスク関数,task20 (tk_select.c),TASK20 (520),着信応答。通話パスを確立する (本来は両端末をtalkへ遷移)。,talk (3) へ (想定),ダミー実装 (処理は空)
タスク関数,task30 (tk_select.c),TASK30 (530),発信側からの切断（通話中のオンフック）処理。,相手側をidle (0)へ (想定),ダミー実装 (処理は空)
タスク関数,task40 (tk_select.c),TASK40 (540),着信側からの切断（通話中のオンフック）処理。,相手側をidle (0)へ (想定),ダミー実装 (処理は空)
タスク関数,task23 (tk_select.c),TASK23 (523),予備タスク。,なし,ダミー実装 (処理は空)
---,---,---,---,---,---
ユーティリティ,next_state (next_state.c),なし,タスク関数によって設定されたデータ（NMEM）に基づき、端末の状態（data[ln].state）を物理的に更新する。,NMEMで指定された状態へ,
ユーティリティ,output (output.c),なし,パスの接続 (connect) または切断 (disconnect) 要求を外部装置へ出力する（シミュレータでは画面に表示）。,なし,


tk_select=制御関数、st_ana=状態分析関数、next_state=状態書き換え関数、output=出力関数、main=main関数
task04=話中処理タスク(相手が話中だった場合に、発信元に話中音 (BUSYTONE) を流し、状態を busy (4) に変更します。)
task12=呼び出し処理タスク(相手を呼び出す処理です。発信元に呼び出し音 (RINGBACKTONE)、着信先に着信音 (RINGINGTONE) を流し、両方の状態を ringing (2) に変更します。)


